<html><head>
<title>SB EW88 by Evelyn (@ev_ynw)</title>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link rel="stylesheet" href="Style.css" type="text/css" media="screen"/>
<script type="text/javascript" charset="utf-8" src="Config.js"></script>
<script type="text/javascript" charset="utf-8" src="Scripts/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="Scripts/main.js"></script>
<script type="text/javascript" charset="utf-8" src="Scripts/lang.js"></script>
</head>

<body onload="init()">

<div id="Widget">
  <div id="Container">
    <div id="Box1"></div>
    <div id="Box2"></div>

    <div id="Clock">
      <a id="hour"></a>:<a id="minute"></a><a id="ampm" style="display:none;"></a>
    </div>
    <div id="divider">|</div>
    <div id="Cal">
      <a id="date"></a> <a id="month"></a>
    </div>

    <div id="desc">Wthr desc</div>
    <div id="L"></div>
    <img id="weatherIcon" src="Stuff/blank.png"/>
  </div>
</div>

<div id="weekday" style="display:none;"></div>

<script type="text/cycript">

  var $$ = function(el){
  return document.getElementById(el);
  }

  var weather = {
    refreshTime : 10 * 60 * 1000, //10 minutes
    updateToday: function(){
    var tempunit = ([IS2Weather isCelsius]) ? "C" : "F";
      $$('weatherIcon').src = 'Stuff/Plain/' + [IS2Weather currentCondition] + '.png';
      $$('desc').innerHTML = [IS2Weather currentConditionAsString];
    },
    updateWeatherValues: function(){
      [IS2Weather updateWeather];
    },
    updateWeather: function(){
      setTimeout(weather.updateWeatherValues, weather.refreshTime);
    },
    init: function(){
        [IS2Weather registerForWeatherUpdatesWithIdentifier:"com.evynw.sbew88" andCallback:^ void () {
          weather.updateWeatherValues();
          weather.updateToday();
        }];
      this.updateWeatherValues();
      this.updateWeather();
    },
    unload: function(){
      [IS2Weather unregisterForUpdatesWithIdentifier:"com.evynw.sbew88"];
      return null;
    }
  };

weather.init();
window.onunload = function(){
  weather.unload();
}
</script>
</body></html>